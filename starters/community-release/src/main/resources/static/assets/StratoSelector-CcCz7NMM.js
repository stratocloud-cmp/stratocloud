import{l as i}from"./request-BLvKnTIl.js";import{ab as q,r as d,a7 as M,m as k,y as O,n as g,o as c,q as y,Q as w,w as f,b0 as G,b as C,F as D,B as $}from"./index-CGSAaZ7c.js";const I={__name:"StratoSelector",props:q({remoteMethod:{required:!0},request:{default:{},required:!0},labelGetter:{required:!0,type:Function},valueGetter:{required:!0,type:Function},listGetter:{required:!0,type:Function},disabled:{required:!1,default:!1},disabledOptionPredicate:{required:!1,type:Function,default:()=>!1},placeholder:{required:!1},multiple:{required:!1,type:Boolean,default:!1},teleported:{required:!1,default:!1,type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:q(["change"],["update:modelValue"]),setup(u,{emit:F}){const n=d(!1),r=M(u,"modelValue"),l=u,p=d(),o=d([]),v=d(!1);function V(){return l.remoteMethod(l.request).then(e=>{if(p.value=e,o.value=l.listGetter(e),r.value&&s(r.value),o.value&&o.value.length===1&&!r.value){const t=l.valueGetter(o.value[0]);r.value=t,s(t)}n.value=!1}).catch(e=>{console.error(e)}).finally(()=>{n.value=!1,v.value=!1})}const m=i.debounce(V,200),h=d();k(()=>l.request,()=>{i.isEqual(h.value,l.request)||(h.value=i.cloneDeep(l.request),n.value=!0,m())},{deep:!0}),O(()=>{n.value=!0,v.value=!0,m()});const b=F;function B(e){for(let t of o.value)if(l.valueGetter(t)===e)return t}function s(e){e?b("change",B(e)):b("change",void 0)}return(e,t)=>{const E=g("ElOption"),S=g("ElSelect");return c(),y(S,{disabled:l.disabled,loading:n.value,modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=a=>r.value=a),filterable:"",onChange:s,placeholder:u.placeholder,multiple:u.multiple,teleported:u.teleported,clearable:""},w({default:f(()=>[(c(!0),C(D,null,$(o.value,a=>(c(),y(E,{disabled:u.disabledOptionPredicate(a,p.value),key:l.valueGetter(a),label:l.labelGetter(a),value:l.valueGetter(a)},{default:f(()=>[G(e.$slots,"default",{row:a})]),_:2},1032,["disabled","label","value"]))),128))]),_:2},[e.$slots.header?{name:"header",fn:f(()=>[G(e.$slots,"header")]),key:"0"}:void 0]),1032,["disabled","loading","modelValue","placeholder","multiple","teleported"])}}};export{I as _};
