import{S as I}from"./StratoCodeBlock-C9u6aQu2.js";import{a7 as g,A as O,y as T,n as d,o as c,b as F,e,w as a,r as R,q as E,v as L,d as S,i as N,u as P,ae as B,F as H}from"./index-CGSAaZ7c.js";const $={__name:"RemoteScriptEditor",props:{modelValue:{required:!0,type:Object},modelModifiers:{}},emits:["update:modelValue"],setup(w){const n=g(w,"modelValue"),r=O(()=>{switch(n.value.type){case"SHELL":return"shell";case"POWERSHELL":return"powershell";case"PYTHON":return"python";default:return"shell"}});return T(()=>{n.value.type||(n.value.type="SHELL"),n.value.content||(n.value.content="")}),(b,p)=>{const f=d("ElOption"),s=d("ElSelect"),V=d("ElInput"),U=d("ElSpace");return c(),F("div",null,[e(U,null,{default:a(()=>[e(s,{modelValue:n.value.type,"onUpdate:modelValue":p[0]||(p[0]=m=>n.value.type=m),style:{width:"200px"}},{default:a(()=>[e(f,{value:"SHELL",label:"Shell"}),e(f,{value:"POWERSHELL",label:"Powershell"}),e(f,{value:"PYTHON",label:"Python"})]),_:1},8,["modelValue"]),e(V,{style:{width:"200px"},placeholder:"指定执行程序路径",modelValue:n.value.programPath,"onUpdate:modelValue":p[1]||(p[1]=m=>n.value.programPath=m)},null,8,["modelValue"])]),_:1}),e(I,{style:{"margin-top":"20px"},language:r.value,modelValue:n.value.content,"onUpdate:modelValue":p[2]||(p[2]=m=>n.value.content=m)},null,8,["language","modelValue"])])}}},M={__name:"CustomFormDefinition",props:{modelValue:{required:!0,type:Object},modelModifiers:{}},emits:["update:modelValue"],setup(w,{expose:n}){const r=g(w,"modelValue");function b(){r.value.items.push({type:"",key:void 0,label:void 0,description:void 0,encrypted:!1,detail:{}})}function p(V){r.value.items.splice(r.value.items.indexOf(V),1)}const f=R();function s(V){f.value.validate(V)}return n({validate:s}),(V,U)=>{const m=d("ElOption"),i=d("ElSelect"),o=d("ElFormItem"),_=d("ElTableColumn"),y=d("ElInput"),v=d("ElCheckbox"),u=d("ElCol"),x=d("ElRow"),h=d("ElInputNumber"),k=d("ElButton"),q=d("ElTable"),C=d("ElForm");return c(),E(C,{ref_key:"formRef",ref:f,model:r.value,size:"small","label-position":"top"},{default:a(()=>[e(q,{data:r.value.items,size:"small"},{default:a(()=>[e(_,{prop:"type",label:"类型",width:"130"},{default:a(l=>[e(o,{prop:"items."+l.$index+".type",required:"","show-message":!1},{default:a(()=>[e(i,{modelValue:l.row.type,"onUpdate:modelValue":t=>l.row.type=t},{default:a(()=>[e(m,{value:"BooleanField",label:"勾选框"}),e(m,{value:"InputField",label:"输入框"}),e(m,{value:"NumberField",label:"数字输入框"}),e(m,{value:"SelectField",label:"下拉框"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:1}),e(_,{label:"键值",width:"120"},{default:a(l=>[e(o,{prop:"items."+l.$index+".key",required:"","show-message":!1},{default:a(()=>[e(y,{modelValue:l.row.key,"onUpdate:modelValue":t=>l.row.key=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:1}),e(_,{label:"名称",width:"120"},{default:a(l=>[e(o,{prop:"items."+l.$index+".label",required:"","show-message":!1},{default:a(()=>[e(y,{modelValue:l.row.label,"onUpdate:modelValue":t=>l.row.label=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:1}),e(_,{label:"描述",width:"120"},{default:a(l=>[e(o,{prop:"items."+l.$index+".description"},{default:a(()=>[e(y,{modelValue:l.row.description,"onUpdate:modelValue":t=>l.row.description=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:1}),e(_,{label:"是否加密",width:"80"},{default:a(l=>[e(o,{prop:"items."+l.$index+".encrypted"},{default:a(()=>[e(v,{modelValue:l.row.encrypted,"onUpdate:modelValue":t=>l.row.encrypted=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:1}),e(_,{label:"高级选项"},{default:a(l=>[l.row.type==="BooleanField"?(c(),E(x,{key:0,gutter:8},{default:a(()=>[e(u,{span:4},{default:a(()=>[e(o,{label:"默认值"},{default:a(()=>[e(v,{modelValue:l.row.detail.defaultValue,"onUpdate:modelValue":t=>l.row.detail.defaultValue=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(u,{span:8},{default:a(()=>[e(o,{label:"显示条件"},{default:a(()=>[e(i,{"suffix-icon":"",filterable:"",multiple:"","allow-create":"",modelValue:l.row.detail.conditions,"onUpdate:modelValue":t=>l.row.detail.conditions=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):l.row.type==="InputField"?(c(),E(x,{key:1,gutter:8},{default:a(()=>[e(u,{span:6},{default:a(()=>[e(o,{label:"默认值"},{default:a(()=>[e(y,{modelValue:l.row.detail.defaultValue,"onUpdate:modelValue":t=>l.row.detail.defaultValue=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(u,{span:4},{default:a(()=>[e(o,{label:"是否必填"},{default:a(()=>[e(v,{modelValue:l.row.detail.required,"onUpdate:modelValue":t=>l.row.detail.required=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(u,{span:6},{default:a(()=>[e(o,{label:"输入类型"},{default:a(()=>[e(i,{modelValue:l.row.detail.inputType,"onUpdate:modelValue":t=>l.row.detail.inputType=t},{default:a(()=>[e(m,{value:"text",label:"默认"}),e(m,{value:"textarea",label:"文本框"}),e(m,{value:"password",label:"密码框"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(u,{span:8},{default:a(()=>[e(o,{label:"显示条件"},{default:a(()=>[e(i,{"suffix-icon":"",filterable:"",multiple:"","allow-create":"",modelValue:l.row.detail.conditions,"onUpdate:modelValue":t=>l.row.detail.conditions=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):l.row.type==="NumberField"?(c(),E(x,{key:2,gutter:8},{default:a(()=>[e(u,{span:4},{default:a(()=>[e(o,{label:"默认值"},{default:a(()=>[e(h,{controls:!1,modelValue:l.row.detail.defaultValue,"onUpdate:modelValue":t=>l.row.detail.defaultValue=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(u,{span:4},{default:a(()=>[e(o,{label:"最小值"},{default:a(()=>[e(h,{controls:!1,modelValue:l.row.detail.min,"onUpdate:modelValue":t=>l.row.detail.min=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(u,{span:4},{default:a(()=>[e(o,{label:"最大值"},{default:a(()=>[e(h,{controls:!1,modelValue:l.row.detail.max,"onUpdate:modelValue":t=>l.row.detail.max=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(u,{span:4},{default:a(()=>[e(o,{label:"是否必填"},{default:a(()=>[e(v,{modelValue:l.row.detail.required,"onUpdate:modelValue":t=>l.row.detail.required=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(u,{span:8},{default:a(()=>[e(o,{label:"显示条件"},{default:a(()=>[e(i,{"suffix-icon":"",filterable:"",multiple:"","allow-create":"",modelValue:l.row.detail.conditions,"onUpdate:modelValue":t=>l.row.detail.conditions=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):l.row.type==="SelectField"?(c(),E(x,{key:3,gutter:8},{default:a(()=>[e(u,{span:5},{default:a(()=>[e(o,{label:"默认值"},{default:a(()=>[e(i,{"suffix-icon":"",filterable:"",multiple:"","allow-create":"",modelValue:l.row.detail.defaultValues,"onUpdate:modelValue":t=>l.row.detail.defaultValues=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(u,{span:5},{default:a(()=>[e(o,{label:"选项值"},{default:a(()=>[e(i,{"suffix-icon":"",filterable:"",multiple:"","allow-create":"",modelValue:l.row.detail.options,"onUpdate:modelValue":t=>l.row.detail.options=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(u,{span:5},{default:a(()=>[e(o,{label:"选项名"},{default:a(()=>[e(i,{"suffix-icon":"",filterable:"",multiple:"","allow-create":"",modelValue:l.row.detail.optionNames,"onUpdate:modelValue":t=>l.row.detail.optionNames=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(u,{span:4},{default:a(()=>[e(o,{label:"是否必填"},{default:a(()=>[e(v,{modelValue:l.row.detail.required,"onUpdate:modelValue":t=>l.row.detail.required=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(u,{span:5},{default:a(()=>[e(o,{label:"显示条件"},{default:a(()=>[e(i,{"suffix-icon":"",filterable:"",multiple:"","allow-create":"",modelValue:l.row.detail.conditions,"onUpdate:modelValue":t=>l.row.detail.conditions=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):L("",!0)]),_:1}),e(_,{width:"80"},{header:a(()=>[e(k,{icon:"Plus",onClick:b})]),default:a(l=>[e(k,{type:"danger",icon:"Minus",onClick:()=>p(l.row)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1},8,["model"])}}},D=S("div",{style:{"margin-top":"20px"}},[S("span",null,"自定义表单字段")],-1),j={style:{"margin-top":"20px","margin-bottom":"20px"}},A="<div>脚本中可使用双花括号{{字段键值}}的形式获取表单输入</div><div>软件操作脚本中使用{{依赖标识_属性键值}}形式以获取该依赖类型下所有目标的属性值</div><div>软件建立依赖/解除依赖脚本中使用{{依赖的软件标识_属性键值}}形式以获取依赖目标的属性值</div><div>打印output(key=value)可输出变量</div><div>软件脚本可打印output(serviceState=STARTED/STOPPED/ERROR)返回服务状态</div>",Y={__name:"RemoteScriptDef",props:{modelValue:{required:!0,type:Object},modelModifiers:{}},emits:["update:modelValue"],setup(w,{expose:n}){const r=g(w,"modelValue"),b=R();function p(f){b.value.validate(f)}return n({validate:p}),(f,s)=>{const V=d("ElIcon"),U=d("ElLink"),m=d("ElTooltip");return c(),F(H,null,[D,e(M,{ref_key:"customFormRef",ref:b,style:{"margin-top":"20px"},modelValue:r.value.customForm,"onUpdate:modelValue":s[0]||(s[0]=i=>r.value.customForm=i)},null,8,["modelValue"]),S("div",j,[e(m,{"raw-content":"",content:A},{default:a(()=>[e(U,null,{default:a(()=>[N(" 编写脚本 "),e(V,null,{default:a(()=>[e(P(B))]),_:1})]),_:1})]),_:1})]),e($,{modelValue:r.value.remoteScript,"onUpdate:modelValue":s[1]||(s[1]=i=>r.value.remoteScript=i)},null,8,["modelValue"])],64)}}};export{Y as _};
