import{S as O}from"./StratoCodeBlock-BwyPwVq9.js";import{a8 as g,A as N,y as R,n as u,o as c,b as F,e,w as a,r as C,q as v,v as L,F as B,d as x}from"./index-C_jnbPMf.js";const P={__name:"RemoteScriptEditor",props:{modelValue:{required:!0,type:Object},modelModifiers:{}},emits:["update:modelValue"],setup(w){const n=g(w,"modelValue"),i=N(()=>{switch(n.value.type){case"SHELL":return"shell";case"POWERSHELL":return"powershell";case"PYTHON":return"python";default:return"shell"}});return R(()=>{n.value.type||(n.value.type="SHELL"),n.value.content||(n.value.content="")}),(b,r)=>{const f=u("ElOption"),V=u("ElSelect"),p=u("ElInput"),S=u("ElSpace");return c(),F("div",null,[e(S,null,{default:a(()=>[e(V,{modelValue:n.value.type,"onUpdate:modelValue":r[0]||(r[0]=m=>n.value.type=m),style:{width:"200px"}},{default:a(()=>[e(f,{value:"SHELL",label:"Shell"}),e(f,{value:"POWERSHELL",label:"Powershell"}),e(f,{value:"PYTHON",label:"Python"})]),_:1},8,["modelValue"]),e(p,{style:{width:"200px"},placeholder:"指定执行程序路径",modelValue:n.value.programPath,"onUpdate:modelValue":r[1]||(r[1]=m=>n.value.programPath=m)},null,8,["modelValue"])]),_:1}),e(O,{style:{"margin-top":"20px"},language:i.value,modelValue:n.value.content,"onUpdate:modelValue":r[2]||(r[2]=m=>n.value.content=m)},null,8,["language","modelValue"])])}}},T={__name:"CustomFormDefinition",props:{modelValue:{required:!0,type:Object},modelModifiers:{}},emits:["update:modelValue"],setup(w,{expose:n}){const i=g(w,"modelValue");function b(){i.value.items.push({type:"",key:void 0,label:void 0,description:void 0,encrypted:!1,detail:{}})}function r(p){i.value.items.splice(i.value.items.indexOf(p),1)}const f=C();function V(p){f.value.validate(p)}return n({validate:V}),(p,S)=>{const m=u("ElOption"),s=u("ElSelect"),o=u("ElFormItem"),_=u("ElTableColumn"),y=u("ElInput"),U=u("ElCheckbox"),d=u("ElCol"),E=u("ElRow"),h=u("ElInputNumber"),k=u("ElButton"),q=u("ElTable"),I=u("ElForm");return c(),v(I,{ref_key:"formRef",ref:f,model:i.value,size:"small","label-position":"top"},{default:a(()=>[e(q,{data:i.value.items,size:"small"},{default:a(()=>[e(_,{prop:"type",label:"类型",width:"130"},{default:a(l=>[e(o,{prop:"items."+l.$index+".type",required:"","show-message":!1},{default:a(()=>[e(s,{modelValue:l.row.type,"onUpdate:modelValue":t=>l.row.type=t},{default:a(()=>[e(m,{value:"BooleanField",label:"勾选框"}),e(m,{value:"InputField",label:"输入框"}),e(m,{value:"NumberField",label:"数字输入框"}),e(m,{value:"SelectField",label:"下拉框"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:1}),e(_,{label:"键值",width:"120"},{default:a(l=>[e(o,{prop:"items."+l.$index+".key",required:"","show-message":!1},{default:a(()=>[e(y,{modelValue:l.row.key,"onUpdate:modelValue":t=>l.row.key=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:1}),e(_,{label:"名称",width:"120"},{default:a(l=>[e(o,{prop:"items."+l.$index+".label",required:"","show-message":!1},{default:a(()=>[e(y,{modelValue:l.row.label,"onUpdate:modelValue":t=>l.row.label=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:1}),e(_,{label:"描述",width:"120"},{default:a(l=>[e(o,{prop:"items."+l.$index+".description"},{default:a(()=>[e(y,{modelValue:l.row.description,"onUpdate:modelValue":t=>l.row.description=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:1}),e(_,{label:"是否加密",width:"80"},{default:a(l=>[e(o,{prop:"items."+l.$index+".encrypted"},{default:a(()=>[e(U,{modelValue:l.row.encrypted,"onUpdate:modelValue":t=>l.row.encrypted=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:1}),e(_,{label:"高级选项"},{default:a(l=>[l.row.type==="BooleanField"?(c(),v(E,{key:0,gutter:8},{default:a(()=>[e(d,{span:4},{default:a(()=>[e(o,{label:"默认值"},{default:a(()=>[e(U,{modelValue:l.row.detail.defaultValue,"onUpdate:modelValue":t=>l.row.detail.defaultValue=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(d,{span:8},{default:a(()=>[e(o,{label:"显示条件"},{default:a(()=>[e(s,{"suffix-icon":"",filterable:"",multiple:"","allow-create":"",modelValue:l.row.detail.conditions,"onUpdate:modelValue":t=>l.row.detail.conditions=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):l.row.type==="InputField"?(c(),v(E,{key:1,gutter:8},{default:a(()=>[e(d,{span:6},{default:a(()=>[e(o,{label:"默认值"},{default:a(()=>[e(y,{modelValue:l.row.detail.defaultValue,"onUpdate:modelValue":t=>l.row.detail.defaultValue=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(d,{span:4},{default:a(()=>[e(o,{label:"是否必填"},{default:a(()=>[e(U,{modelValue:l.row.detail.required,"onUpdate:modelValue":t=>l.row.detail.required=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(d,{span:6},{default:a(()=>[e(o,{label:"输入类型"},{default:a(()=>[e(s,{modelValue:l.row.detail.inputType,"onUpdate:modelValue":t=>l.row.detail.inputType=t},{default:a(()=>[e(m,{value:"text",label:"默认"}),e(m,{value:"textarea",label:"文本框"}),e(m,{value:"password",label:"密码框"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(d,{span:8},{default:a(()=>[e(o,{label:"显示条件"},{default:a(()=>[e(s,{"suffix-icon":"",filterable:"",multiple:"","allow-create":"",modelValue:l.row.detail.conditions,"onUpdate:modelValue":t=>l.row.detail.conditions=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):l.row.type==="NumberField"?(c(),v(E,{key:2,gutter:8},{default:a(()=>[e(d,{span:4},{default:a(()=>[e(o,{label:"默认值"},{default:a(()=>[e(h,{controls:!1,modelValue:l.row.detail.defaultValue,"onUpdate:modelValue":t=>l.row.detail.defaultValue=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(d,{span:4},{default:a(()=>[e(o,{label:"最小值"},{default:a(()=>[e(h,{controls:!1,modelValue:l.row.detail.min,"onUpdate:modelValue":t=>l.row.detail.min=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(d,{span:4},{default:a(()=>[e(o,{label:"最大值"},{default:a(()=>[e(h,{controls:!1,modelValue:l.row.detail.max,"onUpdate:modelValue":t=>l.row.detail.max=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(d,{span:4},{default:a(()=>[e(o,{label:"是否必填"},{default:a(()=>[e(U,{modelValue:l.row.detail.required,"onUpdate:modelValue":t=>l.row.detail.required=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(d,{span:8},{default:a(()=>[e(o,{label:"显示条件"},{default:a(()=>[e(s,{"suffix-icon":"",filterable:"",multiple:"","allow-create":"",modelValue:l.row.detail.conditions,"onUpdate:modelValue":t=>l.row.detail.conditions=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):l.row.type==="SelectField"?(c(),v(E,{key:3,gutter:8},{default:a(()=>[e(d,{span:5},{default:a(()=>[e(o,{label:"默认值"},{default:a(()=>[e(s,{"suffix-icon":"",filterable:"",multiple:"","allow-create":"",modelValue:l.row.detail.defaultValues,"onUpdate:modelValue":t=>l.row.detail.defaultValues=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(d,{span:5},{default:a(()=>[e(o,{label:"选项值"},{default:a(()=>[e(s,{"suffix-icon":"",filterable:"",multiple:"","allow-create":"",modelValue:l.row.detail.options,"onUpdate:modelValue":t=>l.row.detail.options=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(d,{span:5},{default:a(()=>[e(o,{label:"选项名"},{default:a(()=>[e(s,{"suffix-icon":"",filterable:"",multiple:"","allow-create":"",modelValue:l.row.detail.optionNames,"onUpdate:modelValue":t=>l.row.detail.optionNames=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(d,{span:4},{default:a(()=>[e(o,{label:"是否必填"},{default:a(()=>[e(U,{modelValue:l.row.detail.required,"onUpdate:modelValue":t=>l.row.detail.required=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(d,{span:5},{default:a(()=>[e(o,{label:"显示条件"},{default:a(()=>[e(s,{"suffix-icon":"",filterable:"",multiple:"","allow-create":"",modelValue:l.row.detail.conditions,"onUpdate:modelValue":t=>l.row.detail.conditions=t},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):L("",!0)]),_:1}),e(_,{width:"80"},{header:a(()=>[e(k,{icon:"Plus",onClick:b})]),default:a(l=>[e(k,{type:"danger",icon:"Minus",onClick:()=>r(l.row)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1},8,["model"])}}},H=x("div",{style:{"margin-top":"20px"}},[x("span",null,"自定义表单字段")],-1),$=x("div",{style:{"margin-top":"20px","margin-bottom":"20px"}},[x("span",null,"编写脚本")],-1),z={__name:"RemoteScriptDef",props:{modelValue:{required:!0,type:Object},modelModifiers:{}},emits:["update:modelValue"],setup(w,{expose:n}){const i=g(w,"modelValue"),b=C();function r(f){b.value.validate(f)}return n({validate:r}),(f,V)=>(c(),F(B,null,[H,e(T,{ref_key:"customFormRef",ref:b,style:{"margin-top":"20px"},modelValue:i.value.customForm,"onUpdate:modelValue":V[0]||(V[0]=p=>i.value.customForm=p)},null,8,["modelValue"]),$,e(P,{modelValue:i.value.remoteScript,"onUpdate:modelValue":V[1]||(V[1]=p=>i.value.remoteScript=p)},null,8,["modelValue"])],64))}};export{z as _};
